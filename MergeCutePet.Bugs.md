# MergeCutePet.Bugs

## 当前发现bug：

### 细节问题：



### 技能模块：

（1）战斗蓝条满了（超过原本数值）还没有放技能——这个不确定算不算Bug，就是不同的体验

（2）只有普通攻击不应该有蓝条数值——这个和技能那一块一起修改

（3）上次攻击会落到下只怪物身上✖，不是落在下只怪物身上，是下只怪物来了，上只怪物的血条还在。

### 合成模块：



### 任务模块：

（1）任务不能实时更新，要去别的面板，再进来才可以更新任务信息。

### 背包模块：

（1）售卖物品没有优先售卖数量最少的槽，需要优化

### 尚未确定：

（1）petbag会变成空，目前看来可能是神庙用了petbag，使其空掉了。完善了一下神庙那边之后，好像没有遇到这个bug了。

### 折中处理，还需要再优化：

（1）合成时，主宠选择过的，副宠不应该再可以选择。

Unity中DropDown组件只提供了onValueChanged方法，所以没法在下拉时切换当前下拉选项。

选择了一个折中的办法，取两个变量记录下拉框中选择的选项，每次另一个下拉框都和相反变量进行对比。

但是这样还有一个问题是onValueChanged还是完成了，当前下拉框选择项还是显示出来了。

另外这个DropDown组件还有一个问题，如果选择过一个选项，再点击就不会触发事件了。这个只能重写这个组件了。现在没有时间，之后可以查查资料，改一改。

## 新增功能安排：

（1）在战斗面板添加一个《累积收益表》，方便玩家查看战斗收益

（2）任务列表重置：只用一个滑动面板，且任务根据选项生成，而不是显示多余的任务

（3）任务信息中需要显示任务完成进度

（4）背包中添加长按连续使用物品（按照用户当前输入个数来连续使用）

（5）应该增加一个每6小时可以领一颗复活丹的任务，否则玩家存在永远不能继续游戏的可能性

（6）宠物没有显示技能，并且技能应该单独一个面板，能有多种功能

（7）战斗寻找怪物加入等待蒙版

（8）宠物面板UI需要优化，用战斗血条的样式优化面板，要显示宠物当前状态，是死亡还是活着

（9）添加战斗加速功能

（10）神宠涅槃功能，记得合成中移除神宠

（11）地图上标明地图适合的宠物等级，这个需要数值测试

## 已修复bug：

### 20220802

（1）满级增加经验没有加判断，经验池直接变负了

（2）新建角色之后会出现没有导入宠物信息的情况（找了半小时，你敢信是原因竟然是？！=>本科的我没注意语句的顺序，竟然没把单例赋值语句放在Awake()里的第一句，也是佩服当时的我自己，啥也没学通就开始做游戏）

（3）List<Item> itemList存储所有物品信息，每次找太慢了，应该用字典，直接用ID索引

### 20220803

（1）以前的自己用父类item来存储所有的子类，根本没法转成子类，还是要用不同的字典存储。并且GetItemByID方法需要用泛型来完成，这样就只需要一个方法即可

（2）宠物已死亡的提示不够突出（我自己都没发现宠物死了，还以为是面板设置不对，出现遮挡地图的现象）

——现在点击地图进不去的时候显示提示弹窗

（3）选择物品默认使用数量为1

（4）宠物活着居然还消耗了复活丹，不合理——在背包中判断当前主战宠物是否活着，活着再用，否则给出提示

（5）合成的时候需要提醒玩家离开战斗场地，或者程序帮助玩家离开，否则等级下降，战斗力下降，宠物会死亡——目前看来，给出提示更好，让玩家吃一堑长一智，之后可以根据实际情况来调整

### 20220804

（1）合成成功，整个合成面板没有刷新。合成最好给出合成出什么宠物的提示。进化面板的宠物也没有刷新，被合成掉的宠物还在。

![1659518436383](E:\06-Job\04-Unity\MergeCutePet\MDAssets\合成错误.png)

合成提示加上了。进化面板没刷新是更新Slot的时候只是根据bagPets来修改，还需要加一个变量去清理evoluteSlots大于bagPets存储的数据；合成面板则是之前根本没处理mergeSlots，需要删除副宠显示，更新主宠显示。

（2）商店里三星成长魂石的购买价格为0，应该是以前没来得及设计。现在去Item.json里修改过来。

售卖的时候居然也有bug，提示为null，这是因为处理功能不对，直接丢给BAG_REMOVE_REFRESH事件处理就可以。



勉励：

（1）可想而知还有无穷无尽的bug在等着我，但是慢慢改，总能更好。

（2）客户端程序太大了，上传不了github，心累。下个LFS看看

（3）很有意思的是，本科的我一直把Cute拼成Qute，我在Github上新建仓库的时候，还不自信的查了一下可爱到底是哪个单词，果然是Cute没错了，Qute真是太好笑了。